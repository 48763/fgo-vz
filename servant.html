<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Servant一覽</title>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon">
<link href="common/css/common.css" rel="stylesheet" type="text/css" />
<link href="common/css/detail_info.css" rel="stylesheet" type="text/css" />
<link href="common/css/sidebar.css" rel="stylesheet" type="text/css" />
<link href="common/css/sidebar.css" rel="stylesheet" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type='text/javascript' src='common/js/sidebar.js'></script>
<script type='text/javascript' src='common/js/mstClass.js'></script>
<script type='text/javascript' src='common/js/master.js'></script>
<script type='text/javascript' src='common/js/transData.js'></script>
<script type="text/javascript" src="common/js/smoothRollOver.js"></script>
<script type="text/javascript" src="common/js/scrollTop.js"></script>
<script type="text/javascript" src="common/js/jquery.tablesorter.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70142247-1', 'auto');
  ga('require', 'linkid');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
<script type="text/javascript">
function svtTableOut(searchData,searchId)
{
	var classarray = new Array();
	var getClassId = "1,2,3,4,5,6,7,8,9,17";
	if(getUrl("class")) getClassId = getUrl("class");
	if(getClassId){
		classarray = getClassId.split(/,/).slice(0);
	}
	
	var cl=document.getElementsByClassName("classF");
	for(var i=0;i<cl.length;i++)
	{
		for(j in classarray){
			if(classarray[j]==cl[i].src[cl[i].src.indexOf("_4.png")-1]) break;
			if(j==classarray.length-1) classOff(cl[i]);
		}
	}
	var rarityarray = new Array();
	var getRarity = "1,2,3,4,5";
	if(getUrl("rarity")) getRarity = getUrl("rarity");
	if(getRarity){
		rarityarray = getRarity.split(/,/).slice(0);
	}
	
	cl=document.getElementsByClassName("rarityF");
	for(i=0;i<cl.length;i++)
	{
		for(j in rarityarray){
			if(cl[i].id=="rarity"+rarityarray[j]) {cl[i].checked=true;break;}
		}
	}
	
	var svtTableTxt="<thead><tr><th>圖示</th><th>編號</th><th>星數</th><th>名稱</th><th>職階</th><th>Cost</th><th>基本<br>HP</th><th>最大<br>HP</th><th>基本<br>ATK</th><th>最大<br>ATK</th><th>指令卡</th><th>寶具</th><th>幸運</th></tr></thead><tbody>";
	var svtStatusList = ["","A","B","C","D","E","EX","?","?","－"];
	var svtStatusPlusList = ["","","+","++","?","?","?","?","?",""];
	for(i in master.mstSvt)
	{
		if(master.mstSvt[i].type==1||master.mstSvt[i].type==2||master.mstSvt[i].type==5||master.mstSvt[i].type==9)
		{
		for(var t in classarray){
			if (classarray[t]==master.mstSvt[i].classId){

			for(var j in master.mstSvtLimit)
				{if(master.mstSvtLimit[j].svtId==master.mstSvt[i].id)break;}
				for(var h in rarityarray){
					if (rarityarray[h]==master.mstSvtLimit[j].rarity){
			if(master.mstSvt[i].collectionNo==0) svtTableTxt+="<tr align=\"center\"><td><a href='svtData.html?id="+master.mstSvt[i].id+"'>";
			else svtTableTxt+="<tr align=\"center\"><td><a href='svtData.html?no="+master.mstSvt[i].collectionNo+"'>";
			svtTableTxt+="<img src='common/images/icon/faces/"+master.mstSvt[i].id+"0.png' onerror=javascript:this.src='common/images/icon/faces/0.png' title='"+findSvtNameZh2(master.mstSvt[i].id)+"' width=80></img>";
			svtTableTxt+="</a></td>";
			
			svtTableTxt+="<td>"+master.mstSvt[i].collectionNo+"</td><td class=\"star\">";
			for(var c=0;c<master.mstSvtLimit[j].rarity;c++)
				svtTableTxt+="★";
			svtTableTxt+="</td>";
			
			if(master.mstSvt[i].collectionNo==0) svtTableTxt+="<td><a href='svtData.html?id="+master.mstSvt[i].id+"'>";
			else svtTableTxt+="<td><a href='svtData.html?no="+master.mstSvt[i].collectionNo+"'>";
			var svtNameZh = findSvtNameZh(master.mstSvt[i].id);
			if(svtNameZh) svtTableTxt+="<div class=ruby>"+master.mstSvt[i].ruby+"</div>"+svtNameZh;
			else svtTableTxt+=master.mstSvt[i].name;
			svtTableTxt+="</a></td>";
			
			svtTableTxt+="<td>";
			for(c in mstClass)
				if(mstClass[c].id==master.mstSvt[i].classId) {svtTableTxt+="<span style='display:none'>"+master.mstSvt[i].classId+"</span>"+mstClass[c].name;break;}
			svtTableTxt+="</td>";
			
			svtTableTxt+="<td>"+master.mstSvt[i].cost+"</td>";
			
			svtTableTxt+="<td>"+master.mstSvtLimit[j].hpBase+"</td><td>"+master.mstSvtLimit[j].hpMax+"</td><td>"+master.mstSvtLimit[j].atkBase+"</td><td>"+master.mstSvtLimit[j].atkMax+"</td>";
			
			svtTableTxt+="<td width=200>";
			for(c=0;c<master.mstSvt[i].cardIds.length;c++){
				svtTableTxt+="<img src='common/images/icon/cmdCard/icon_cmdCard_"+master.mstSvt[i].cardIds[c]+".png' width=60";
				if(c!=master.mstSvt[i].cardIds.length-1)svtTableTxt+=" style='margin-right: -30px;'"
				svtTableTxt+="></img>";
			}
			for(c=0;c<master.mstSvt[i].cardIds.length;c++)
				svtTableTxt+="<span style='display:none'>"+master.mstSvt[i].cardIds[c]+"</span>";
			svtTableTxt+="</td>";
			
			svtTableTxt+="<td>";
			for(c in master.mstSvtTreasureDevice){
				if(master.mstSvt[i].id==master.mstSvtTreasureDevice[c].svtId)
					{svtTableTxt+="<img src='common/images/icon/cmdCard/icon_cmdCard_"+master.mstSvtTreasureDevice[c].cardId+".png' width=60></img>";
					svtTableTxt+="<span style='display:none'>"+master.mstSvtTreasureDevice[c].cardId+"</span>";
					break;}
			}
			svtTableTxt+="</td>";
			
			svtTableTxt+="<td>"+svtStatusList[Math.floor(master.mstSvtLimit[j].luck/10)]+svtStatusPlusList[master.mstSvtLimit[j].luck%10]+"</td>";
			
			svtTableTxt+="</tr>";
			break;}}
		break;}}}
		
	
	}
	svtTableTxt+="</tbody>";
	document.getElementById("svtTable").innerHTML=svtTableTxt;
	$("#svtTable").tablesorter({sortList: [[1,0]], headers: { 0:{sorter: false}, 3:{sorter: false}}});
}
function findName(searchData,searchId)
{
	for(var i=0;i<searchData.length;i++)
		if(searchData[i].id==searchId) return i;
	return null;
}
function classOff(imgC)
{
	imgC.src=imgC.src.replace("_4.png","_1.png");
	imgC.onclick = Function("classOn(this);");
}
function classOn(imgC)
{
	imgC.src=imgC.src.replace("_1.png","_4.png");
	imgC.onclick = Function("classOff(this);");
}
function classAllOff()
{
	var cl=document.getElementsByClassName("classF");
	for(var i=0;i<cl.length;i++)
	{
		classOff(cl[i]);
	}
}
function classAllOn()
{
	var cl=document.getElementsByClassName("classF");
	for(var i=0;i<cl.length;i++)
	{
		classOn(cl[i]);
	}
}
function classFilter()
{
	var urltxt="servant.html"
	var cl=document.getElementsByClassName("classF");
	var classarray = new Array();
	for(var i=0;i<cl.length;i++)
	{
		if(cl[i].src.search("_4.png")!=-1) classarray.push(cl[i].src[cl[i].src.indexOf("_4.png")-1]);
	}
	var rarityarray = new Array();
	cl=document.getElementsByClassName("rarityF");
	for(i=0;i<cl.length;i++)
	{
		if(cl[i].checked==true) rarityarray.push(cl[i].value);
	}
	var classUrl = false; if(classarray!="1,2,3,4,5,6,7,8,9,17") classUrl=true;
	var rarityUrl = false; if(rarityarray!="1,2,3,4,5") rarityUrl=true;
	if(classUrl||rarityUrl) urltxt+="?";
	if(classUrl) urltxt+="class="+classarray;
	if(classUrl&&rarityUrl) urltxt+="&";
	if(rarityUrl) urltxt+="rarity="+rarityarray;
	window.location = urltxt;
}
function getUrl(getStr)
{
	var url=window.location.toString(); //取得當前網址   
	var str=""; //參數中等號左邊的值   
	var str_value=""; //參數中等號右邊的值   
	if(url.indexOf("?")!=-1){   
		//如果網址有"?"符號   
		var ary=url.split("?")[1].split("&");   
		//取得"?"右邊網址後利用"&"分割字串存入ary陣列 ["a=1","b=2","c=3"]   
		for(var i in ary){   
			//取得陣列長度去跑迴圈，如:網址有三個參數，則會跑三次   
			str=ary[i].split("=")[0];   
			//取得參數"="左邊的值存入str變數中   
			if (str == getStr) {   
			//若str等於想要抓取參數 如:b   
				str_value = decodeURI(ary[i].split("=")[1]);   
				//取得b等號右邊的值並經過中文轉碼後存入str_value   
			}   
		}   
	}
	return str_value;
}
</script>
</head>
<body onload="loadsidebar();svtTableOut();">
<!--二欄橫幅主要區塊開始-->
<div style='position:relative;'>
    <!--選單區塊開始-->
    <div id="div_right_sidebar"></div>
    <!--選單區塊結束-->
    <!--主要內容區塊開始-->
    <div id="div_content">
<div class="container">
<article class="content textsize">
<form>
  <fieldset style="width:500px;text-align:center;">
    <legend>篩選條件</legend>
	<img src="common/images/icon/class/class_1001_4.png" title="全選" onclick="classAllOn();" class="classA"/>
	<img src="common/images/icon/class/class_1001_1.png" title="全消" onclick="classAllOff();" class="classA"/><br>
    <img src="common/images/icon/class/class_1_4.png" title="Saber" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_2_4.png" title="Archer" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_3_4.png" title="Lancer" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_4_4.png" title="Rider" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_5_4.png" title="Caster" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_6_4.png" title="Assassin" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_7_4.png" title="Berserker" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_8_4.png" title="Shielder" onclick="classOff(this);" class="classF"/>
	<img src="common/images/icon/class/class_9_4.png" title="Ruler" onclick="classOff(this);" class="classF"/>
	<input type="checkbox" id="rarity1" class="rarityF" value="1"/><span class="star">★</span>
	<input type="checkbox" id="rarity2" class="rarityF" value="2"/><span class="star">★★</span>
	<input type="checkbox" id="rarity3" class="rarityF" value="3"/><span class="star">★★★</span>
	<input type="checkbox" id="rarity4" class="rarityF" value="4"/><span class="star">★★★★</span>
	<input type="checkbox" id="rarity5" class="rarityF" value="5"/><span class="star">★★★★★</span>
	<br><input type="button" value="開始篩選" onclick="classFilter();">
  </fieldset>
</form>
<table onload="" id="svtTable" class="tablesorter" width=1270><tr><td></td></tr></table>
</article>
</div>
<div id="gotop"><a href="#"><img src="common/images/btn_gotop_off.jpg" width="47" height="47" alt="返回頂端" /></a></div>
    </div>
    <!--主要內容區塊結束-->
</div>
<!--二欄橫幅主要區塊結束-->
</body>
</html>