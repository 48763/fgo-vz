<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="common/css/common.css" rel="stylesheet" type="text/css" />
<link href="common/css/detail_info.css" rel="stylesheet" type="text/css" />
<title>寶具效果一覽</title>
<script type='text/javascript' src='common/js/mstClass.js'></script>
<script type='text/javascript' src='common/js/master.js'></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<link href="common/css/tab.css" rel="stylesheet" type="text/css" />
<script type='text/javascript' src='common/js/transData.js'></script>
<script type="text/javascript" src="common/js/smoothRollOver.js"></script>
<script type="text/javascript" src="common/js/scrollTop.js"></script>
<script type="text/javascript">
function trdvDataOut(searchData,searchId)
{
	var cardList = ["","0000ff","ff0000","00ff00"];
	var trdvDataTxt="<tr><th>Servant</th><th>寶具名</th><th>等級</th><th>種類</th><th>效果</th><th>Lv.1</th><th>Lv.2</th><th>Lv.3</th><th>Lv.4</th><th>Lv.5</th></tr>";
	var skillText="";
	var skillrowCount=0;
	for(var c in master.mstSvt)
	{
		if(master.mstSvt[c].type==1||master.mstSvt[c].type==2||master.mstSvt[c].type==5){
			var svtTrdvrowCount=0;
			var sklTxt="";
			
			for(var k in master.mstTreasureDevice){
				if(master.mstTreasureDevice[k].seqId==master.mstSvt[c].id){
					skillText="";
					skillrowCount=0;
					var tdDetailTxt = new Array();
					for(var g in tdDetail){
						if(master.mstTreasureDevice[k].id==tdDetail[g][0]){
							tdDetailTxt = tdDetail[g];break;
						}
					}
					if(!tdDetailTxt[0])
						for(g in master.mstTreasureDeviceDetail){
							if(master.mstTreasureDevice[k].treasureDeviceId==master.mstTreasureDeviceDetail[g].id){
								tdDetailTxt[0] = master.mstSkillDetail[k].id;
								tdDetailTxt[1] = master.mstSkillDetail[k].detail;break;
							}
						}
					tdDetailTxt[1]=tdDetailTxt[1].replace(/ |　/g,"");
					tdDetailTxt[1]=tdDetailTxt[1].replace(/＆/g,"＆┗");
					var tdDetailArray = new Array();
						tdDetailArray = tdDetailTxt[1].split(/＆|＋/);
					
					skillrowCount+=tdDetailArray.length;
					for(var d=0;d<tdDetailArray.length;d++){
						var isLvUp = tdDetailArray[d].search(/\{0\}/);
						tdDetailArray[d]=tdDetailArray[d].replace(/\{0\}/g,"Lv.");
						tdDetailArray[d]=tdDetailArray[d].replace(/【副作用】/g,"<font color=\"#006400 \">【副作用】</font>");
						tdDetailArray[d]=tdDetailArray[d].replace(/\[Lv.]/g,"<font color=\"#CC00CC \">[Lv.]</font>");
						tdDetailArray[d]=tdDetailArray[d].replace(/<O/g,"<br><font color=\"#CC6600\">< O");
						tdDetailArray[d]=tdDetailArray[d].replace(/P>/g,"P ></font>");
						if(d!=0) skillText+="<tr>"
						skillText+="<td>"+tdDetailArray[d]+"</td>";
						
						if(isLvUp&&tdDetailTxt[2+d].search(/\//)!=-1){
							var skLvArray = new Array();
								skLvArray = tdDetailTxt[2+d].split(/\//);
							for(g in skLvArray)
								skillText+="<td align=center>"+skLvArray[g]+"</td>";
						}
						else{
							skillText+="<td colspan=5>";
							if(tdDetailTxt[2+d].length==0)
								skillText+=("　---");
							else if(tdDetailTxt[2+d]!=null) 
							{
								skillText+="　"+tdDetailTxt[2+d].replace(/\//g," / ");
							}
							else skillText+="待補";
						}
						skillText+="</td></tr>";
					}
					
					sklTxt+="<td align=center rowspan="+skillrowCount+"><font size=\"1\">"+master.mstTreasureDevice[k].ruby+"</font><br>";
					for(d in master.mstSvtTreasureDevice)
						if(master.mstTreasureDevice[k].id==master.mstSvtTreasureDevice[d].treasureDeviceId){
							sklTxt+="<b><font color=\"#"+cardList[master.mstSvtTreasureDevice[d].cardId]+"\">"+master.mstTreasureDevice[k].name+"</font></b>";break;}
					sklTxt+="</td><td align=center rowspan="+skillrowCount+">"+master.mstTreasureDevice[k].rank+"</td><td align=center rowspan="+skillrowCount+">"+master.mstTreasureDevice[k].typeText.replace(/対/g,"對").replace(/宝/g,"寶").replace(/剣/g,"劍").replace(/悪/g,"惡").replace(/奥/g,"奧")+"</td>"+skillText;
					
					svtTrdvrowCount+=skillrowCount;
				}
			}
			
			trdvDataTxt+="<tr><td rowspan="+svtTrdvrowCount+">";
				for(d in svtName)
					if(svtName[d][0]==master.mstSvt[c].id){trdvDataTxt+=svtName[d][2]+"<br>";break;}
			trdvDataTxt+="</td>";
			trdvDataTxt+=sklTxt;//alert(trdvDataTxt);
		}
	}
	document.getElementById("trdvData").innerHTML=trdvDataTxt;
}
function findName(searchData,searchId)
{
	for(var i=0;i<searchData.length;i++)
		if(searchData[i].id==searchId) return i;
	return null;
}
</script>
</head>
<body onload="trdvDataOut();">
<div class="container">
<article class="content textsize">
<table id="trdvData" width=100%><tr><td></td></tr></table>
<hr>
<p><a href="http://goo.gl/Nw8bbF" target="_blank">意見提供</a></p>
</article>
</div>
<div id="gotop"><a href="#"><img src="common/images/btn_gotop_off.jpg" width="47" height="47" alt="返回頂端" /></a></div>
</body>
</html>